



<table class="table table-bordered">
  <thead>
    <% if @trades.has_key?(:total) %>
      <tr>
        <th><% total = @trades[:total] %></th>
        <th><%= total[:price].round(2)%></th>
        <th><%= total[:payment].round(2)%></th>
        <th><%= total[:total_fee].round(2)%></th>
        <th><%= total[:discount_fee].round(2)%></th>
        <th><%= total[:adjust_fee].round(2)%></th>
        <th><%= total[:num]%></th>
      </tr>
    <% end %>
    <% if @trades.has_key?(:total) %>
      <tr>
        <th><% sale = @trades[:sale] %>品牌特卖</th>
        <th><%= sale[:price].round(2)%></th>
        <th><%= sale[:payment].round(2)%></th>
        <th><%= sale[:total_fee].round(2)%></th>
        <th><%= sale[:discount_fee].round(2)%></th>
        <th><%= sale[:adjust_fee].round(2)%></th>
        <th><%= sale[:num]%></th>
      </tr>
    <% end %>
    <% if @trades.has_key?(:oversold) %>
      <tr>
        <th><% oversold = @trades[:oversold] %>超卖</th>
        <th><%= oversold[:price].round(2)%></th>
        <th><%= oversold[:payment].round(2)%></th>
        <th><%= oversold[:total_fee].round(2)%></th>
        <th><%= oversold[:discount_fee].round(2)%></th>
        <th><%= oversold[:adjust_fee].round(2)%></th>
        <th><%= oversold[:num]%></th>
      </tr>
    <% end %>
    <tr>
      <th>名称</th>
      <th>价格</th>
      <th>实付</th>
      <th>应付</th>
      <th>折扣</th>
      <th>调价</th>
      <th>数量</th>
    </tr>
  </thead>
<tbody>  
<% @trades[:state].each do |id, state| # 循环货品 %>
<% total = state[:total] || state[:sale] %>
    <tr class="odd">
      <td><span class="label"><%= state[:name] %></span></td>
      <td><%= parse_sales(state, :price, 2) %></td>
      <td><%= parse_sales(state, :payment, 2) %></td>
      <td><%= parse_sales(state, :total_fee, 2) %></td>
      <td><%= parse_sales(state, :discount_fee, 2) %></td>
      <td><%= parse_sales(state, :adjust_fee, 2) %></td>
      <td><%= parse_sales(state) %></td>
    </tr>
<% end %> 
</tbody>
</table>